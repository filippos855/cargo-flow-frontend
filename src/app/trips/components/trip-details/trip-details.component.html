<h2>Detalii cursă</h2>

@if (trip$ | async; as trip) {
  <div>
    <p><strong>Număr:</strong> {{ trip.number }}</p>
    <p><strong>Dată început:</strong> {{ trip.startDate | date: 'dd/MM/yyyy HH:mm' }}</p>
    <p><strong>Dată sfârșit:</strong> {{ trip.endDate ? (trip.endDate | date: 'dd/MM/yyyy HH:mm') : '—' }}</p>
    <p><strong>Status:</strong> {{ trip.status.name }}</p>
    <p><strong>Firmă transport:</strong> {{ trip.transportCompany.name }}</p>
    <p><strong>Șofer:</strong> {{ trip.driver?.fullName || '—' }}</p>
    <p><strong>Tractor:</strong> {{ trip.tractorUnit?.identifier || '—' }}</p>
    <p><strong>Remorcă:</strong> {{ trip.trailer?.identifier || '—' }}</p>
    <h3>Comenzi incluse</h3>
    @if (trip.orders?.length) {
      <div>
        <table>
          <thead>
            <tr>
              <th>Număr comandă</th>
              <th>Client</th>
              <th>Data adăugare</th>
            </tr>
          </thead>
          <tbody>
            @for (order of trip.orders; track order) {
              <tr>
                <td>
                  <a [routerLink]="['/orders', order.id]">{{ order.number }}</a>
                </td>
                <td>{{ order.company.name }}</td>
                <td>{{ order.createdDate | date: 'shortDate' }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    } @else {
      <p>Nu există comenzi incluse în această cursă.</p>
    }
    <br />
    <button (click)="goBack()">← Înapoi</button>
  </div>
} @else {
  <p>Se încarcă detaliile cursei...</p>
}

